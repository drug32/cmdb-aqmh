<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.chinatelecom.operations.aqmhserivce.mapper.IntfSocDjxtMapper">


    <select id="getLoginTimes" resultType="com.chinatelecom.operations.aqmhserivce.entity.mbresultentity.GetLoginTimes">
        SELECT
            work_prop_name AS workPropName,
            SUM (loginTimes) AS total
        FROM
            (
                SELECT
                    staffAccount,loginTimes,
                    table2.work_prop_name
                FROM
                    ( SELECT staff_account AS staffAccount, COUNT ( 1 ) AS loginTimes FROM tb_itm_tyrz_login_auth_log WHERE target_client_id =#{targetClientId} GROUP BY staff_account ) AS table1
                        LEFT JOIN empee_acct_info table2 ON table1.staffAccount = table2.staff_account
            ) AS table3
        GROUP BY
            work_prop_name
    </select>
</mapper>